<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‰ Countdown Sinh Nháº­t Nguyá»…n ChÃ­ Dá»± ğŸ‚</title>
    <link rel="stylesheet" href="style.css">
    <!-- Preload background má»›i Ä‘á»ƒ load tá»©c thÃ¬, khÃ´ng lá»—i crop -->
    <link rel="preload" href="https://images.pexels.com/photos/949592/pexels-photo-949592.jpeg" as="image">
</head>
<body>
    <div class="bg"></div>
    <div class="overlay"></div>

    <div class="fireworks" id="fireworks">
        <img src="https://i.pinimg.com/originals/76/b5/82/76b58298e9cee7c935f9ec9ba1433508.gif">
        <img src="https://i.pinimg.com/originals/7a/f2/ef/7af2ef0b0b2294982218b48d4a1f488b.gif">
        <img src="https://media.tenor.com/ZYSYsmBaqHMAAAAM/fireworks-firework.gif">
        <img src="https://i.gifer.com/7J8Z.gif">
    </div>

    <main class="main">
        <div class="emojis top">ğŸ‰ğŸ¥³ğŸ‚ğŸŠğŸ†ğŸˆâœ¨</div>
        <h1>COUNTDOWN Tá»šI SINH NHáº¬T<br>NGUYá»„N CHÃ Dá»°</h1>
        
        <p class="invite">ğŸˆ CÃ™NG Äá»¢I Tá»šI NGÃ€Y SINH NHáº¬T TUI NHÃ‰ Má»ŒI NGÆ¯á»œI ğŸˆ</p>
        
        <div class="timer" id="timer">
            <div class="box"><span id="days">00</span><span>NgÃ y</span></div>
            <div class="box"><span id="hours">00</span><span>Giá»</span></div>
            <div class="box"><span id="minutes">00</span><span>PhÃºt</span></div>
            <div class="box"><span id="seconds">00</span><span>GiÃ¢y</span></div>
        </div>

        <button id="musicBtn">ğŸµ Báº¤M Äá»‚ Báº¬T NHáº C Ná»€N ğŸµ</button>

        <p id="musicTitle" class="music-title">ğŸ¶ "KhÃºc HÃ¡t Má»«ng Sinh Nháº­ t" - Phan ÄÃ¬nh TÃ¹ng Ä‘ang phÃ¡t ğŸ¶</p>

        <div class="wish" id="wish">
            ğŸ‰ğŸŠğŸ¥³ğŸ†ğŸ‚ğŸˆâœ¨<br>
            CHÃšC Má»ªNG SINH NHáº¬T<br>
            NGUYá»„N CHÃ Dá»°!<br><br>
            NÄƒm nay báº¡n Ä‘Ã£ trÃ²n <strong>17 tuá»•i</strong> ğŸ°ğŸ<br>
            CHÃšC Má»ªNG Báº N!!! ğŸ‡ğŸ¥‚ğŸ‰
        </div>

        <div class="emojis bottom">ğŸğŸ°ğŸˆğŸŠğŸ¥³ğŸ‰âœ¨</div>
    </main>

    <!-- Nháº¡c ná»n Phan ÄÃ¬nh TÃ¹ng -->
    <iframe id="youtubePlayer" 
    src="https://www.youtube.com/embed/SH3U37kkuA0?autoplay=0&loop=1&playlist=SH3U37kkuA0&controls=0&modestbranding=1&rel=0&fs=0&iv_load_policy=3&disablekb=1&enablejsapi=1" 
    allow="autoplay" style="display:none;">
    </iframe>

    <script>
        const emojis = ['ğŸ‰','ğŸŠ','ğŸ‚','ğŸ¥³','ğŸˆ','ğŸ','ğŸ°','âœ¨','ğŸ†','ğŸ‡','ğŸ€','ğŸ­','ğŸ','ğŸ¥‚'];

        document.body.addEventListener('click', e => {
            if (e.target.id === 'musicBtn') return;

            const el = document.createElement('div');
            el.classList.add('fly-emoji');
            el.textContent = emojis[Math.floor(Math.random() * emojis.length)];
            el.style.left = e.clientX + 'px';
            el.style.top = e.clientY + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        });

        const musicBtn = document.getElementById('musicBtn');
        const musicTitle = document.getElementById('musicTitle');
        const player = document.getElementById('youtubePlayer');

        let isPlaying = false;

        musicBtn.addEventListener('click', () => {
            if (isPlaying) {
                player.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                musicBtn.textContent = 'ğŸµ Báº¤M Äá»‚ Báº¬T NHáº C Ná»€N ğŸµ';
                musicTitle.style.display = 'none';
                isPlaying = false;
            } else {
                player.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                musicBtn.textContent = 'â¸ Táº®T NHáº C Ná»€N';
                musicTitle.style.display = 'block';
                isPlaying = true;
            }
        });

        const target = new Date();
        const now = new Date();
        if (now.getMonth() > 1 || (now.getMonth() === 1 && (now.getDate() > 26 || (now.getDate() === 26 && now.getHours() >= 20)))) {
            target.setFullYear(now.getFullYear() + 1);
        } else {
            target.setFullYear(now.getFullYear());
        }
        target.setMonth(1);
        target.setDate(26);
        target.setHours(20, 0, 0, 0);

        const timerEl = document.getElementById('timer');
        const wishEl = document.getElementById('wish');
        const fireworksEl = document.getElementById('fireworks');

        function tick() {
            const diff = target - Date.now();
            if (diff <= 0) {
                timerEl.style.opacity = '0';
                setTimeout(() => {
                    timerEl.style.display = 'none';
                    wishEl.style.display = 'block';
                    wishEl.style.opacity = '1';
                    fireworksEl.classList.add('active');
                    if (!isPlaying) {
                        player.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                        musicBtn.textContent = 'â¸ Táº®T NHáº C Ná»€N';
                        musicTitle.style.display = 'block';
                        isPlaying = true;
                    }
                }, 1200);
                return;
            }

            const d = Math.floor(diff / 86400000);
            const h = Math.floor((diff % 86400000) / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);

            document.getElementById('days').textContent = d.toString().padStart(2, '0');
            document.getElementById('hours').textContent = h.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = m.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = s.toString().padStart(2, '0');

            requestAnimationFrame(tick);
        }
        requestAnimationFrame(tick);
    </script>
</body>
</html>
