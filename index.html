<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ğŸ‰ Countdown Sinh Nháº­t Nguyá»…n ChÃ­ Dá»± ğŸ‚</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="bg"></div>
    <div class="overlay"></div>

    <div class="fireworks" id="fireworks">
        <img src="https://i.pinimg.com/originals/76/b5/82/76b58298e9cee7c935f9ec9ba1433508.gif">
        <img src="https://i.pinimg.com/originals/7a/f2/ef/7af2ef0b0b2294982218b48d4a1f488b.gif">
        <img src="https://media.tenor.com/ZYSYsmBaqHMAAAAM/fireworks-firework.gif">
        <img src="https://i.gifer.com/7J8Z.gif">
    </div>

    <main class="main">
        <div class="emojis top">ğŸ‰ğŸ¥³ğŸ‚ğŸŠğŸ†ğŸˆâœ¨</div>
        <h1>COUNTDOWN Tá»šI SINH NHáº¬T<br>NGUYá»„N CHÃ Dá»°</h1>
        
        <p class="invite">ğŸˆ CÃ™NG Äá»¢I Tá»šI NGÃ€Y SINH NHáº¬T TUI NHÃ‰ Má»ŒI NGÆ¯á»œI ğŸˆ</p>
        
        <div class="timer" id="timer">
            <div class="box"><span id="days">00</span><span>NgÃ y</span></div>
            <div class="box"><span id="hours">00</span><span>Giá»</span></div>
            <div class="box"><span id="minutes">00</span><span>PhÃºt</span></div>
            <div class="box"><span id="seconds">00</span><span>GiÃ¢y</span></div>
        </div>

        <button id="memoryBtn">â¤ï¸ XEM Ká»ˆ NIá»†M â¤ï¸</button>

        <div class="memory-box" id="memoryBox">
            <h3>Nhá»¯ng ká»‰ niá»‡m cá»§a Nguyá»…n ChÃ­ Dá»±</h3>
            <p>BÃ¢y giá» chÆ°a cÃ³ ká»‰ niá»‡m gÃ¬ huhu ğŸ˜­</p>
            <p>CÃ¡c báº¡n hÃ£y Ä‘á»£i nÄƒm sau nhÃ©, mÃ¬nh sáº½ cá»‘ gáº¯ng thu tháº­p nhiá»u ká»‰ niá»‡m nháº¥t cÃ³ thá»ƒ!</p>
            <p>Mong cÃ¡c báº¡n tha lá»—i cho mÃ¬nh nha ğŸ¥¹</p>
            <div class="memory-content">
                <img src="https://via.placeholder.com/600x400?text=Coming+Soon+Next+Year" alt="Ká»‰ niá»‡m sáº¯p cÃ³">
                <p>(áº¢nh/video ká»‰ niá»‡m sáº½ Ä‘Æ°á»£c thÃªm vÃ o nÄƒm sau â¤ï¸)</p>
            </div>
        </div>

        <div class="wish" id="wish">
            ğŸ‰ğŸŠğŸ¥³ğŸ†ğŸ‚ğŸˆâœ¨<br>
            CHÃšC Má»ªNG SINH NHáº¬T<br>
            NGUYá»„N CHÃ Dá»°!<br><br>
            NÄƒm nay báº¡n Ä‘Ã£ trÃ²n <strong>17 tuá»•i</strong> ğŸ°ğŸ<br>
            CHÃšC Má»ªNG Báº N!!! ğŸ‡ğŸ¥‚ğŸ‰
        </div>

        <div class="emojis bottom">ğŸğŸ°ğŸˆğŸŠğŸ¥³ğŸ‰âœ¨</div>
    </main>

    <script>
        // Tá»‘i Æ°u emoji click: debounce vÃ  limit sá»‘ lÆ°á»£ng
        const emojis = ['ğŸ‰','ğŸŠ','ğŸ‚','ğŸ¥³','ğŸˆ','ğŸ','ğŸ°','âœ¨','ğŸ†','ğŸ‡','ğŸ€','ğŸ­','ğŸ','ğŸ¥‚'];
        let clickTimeout;

        document.body.addEventListener('click', e => {
            if (e.target.id === 'memoryBtn') return;

            clearTimeout(clickTimeout);
            clickTimeout = setTimeout(() => {
                const el = document.createElement('div');
                el.classList.add('fly-emoji');
                el.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                el.style.left = `${e.clientX}px`;
                el.style.top = `${e.clientY}px`;
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 2000);
            }, 100); // debounce 100ms Ä‘á»ƒ trÃ¡nh spam emoji gÃ¢y lag
        });

        const memoryBtn = document.getElementById('memoryBtn');
        const memoryBox = document.getElementById('memoryBox');

        memoryBtn.addEventListener('click', e => {
            e.stopPropagation();
            memoryBox.style.display = 'block';
            memoryBtn.style.display = 'none';
        });

        // Countdown siÃªu mÆ°á»£t vá»›i requestAnimationFrame
        const target = new Date();
        const now = new Date();
        if (now.getMonth() > 1 || (now.getMonth() === 1 && (now.getDate() > 26 || (now.getDate() === 26 && now.getHours() >= 20)))) {
            target.setFullYear(now.getFullYear() + 1);
        } else {
            target.setFullYear(now.getFullYear());
        }
        target.setMonth(1);
        target.setDate(26);
        target.setHours(20, 0, 0, 0);

        const timerEl = document.getElementById('timer');
        const wishEl = document.getElementById('wish');
        const fireworksEl = document.getElementById('fireworks');

        let lastTime = 0;

        function tick(time) {
            if (!lastTime) lastTime = time;
            if (time - lastTime < 1000) { // update má»—i giÃ¢y Ä‘á»ƒ trÃ¡nh over-update
                requestAnimationFrame(tick);
                return;
            }
            lastTime = time;

            const diff = target - Date.now();
            if (diff <= 0) {
                timerEl.style.opacity = '0';
                setTimeout(() => {
                    timerEl.style.display = 'none';
                    wishEl.style.display = 'block';
                    wishEl.style.opacity = '1';
                    fireworksEl.classList.add('active');
                }, 1200);
                return;
            }

            const d = Math.floor(diff / 86400000);
            const h = Math.floor((diff % 86400000) / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);

            document.getElementById('days').textContent = d.toString().padStart(2, '0');
            document.getElementById('hours').textContent = h.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = m.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = s.toString().padStart(2, '0');

            requestAnimationFrame(tick);
        }
        requestAnimationFrame(tick);
    </script>
</body>
</html>
